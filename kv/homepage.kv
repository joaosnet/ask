#:import MapView kivy_garden.mapview.MapView
#:include kv/perfilpage.kv
<HomePage>:
    BoxLayout:
        id: box
        orientation:'vertical'

        # Barra de Navegação
        MDBottomNavigation:
            id: barra_navegacao
            # painel da cor do fundo branco
            md_bg_color: "#EDF1FF"
            # font_name: 'icones/Roboto-Regular.ttf'

            MDBottomNavigationItem:
                name: 'screen 1'
                text: 'Início'
                icon: 'icones/Home.png'
                # badge_icon: "numeric-1

                MDFloatLayout:

                    # Visualização do Mapa
                    MapView:
                        # localização do mapa em tempo real
                        lat: -1.474081251977831
                        lon: -48.45160647253775
                        zoom: 5
                        double_tap_zoom: True
                        # Verifica a localização atual quando o mapa é carregado
                        # on_lat:
                        #     print(self.lat)
                        # on_lon:
                        #     print(self.lon)
                        MapMarkerPopup:
                            source: 'icones/Marker.png'
                            lat: -1.474081251977831
                            lon: -48.45160647253775
                                
                    # Botao de configuração
                    MDIconButton:
                        pos_hint: {'center_x': 0.1,'center_y': 0.93}
                        icon: 'icones/config/bt-configuraçoes@3x.png'
                        icon_size: "40sp"
                        on_release: nav_drawer.set_state("open")
                        

            MDBottomNavigationItem:
                name: 'screen 2'
                text: 'Navegar'
                icon: 'icones/GPS_fixed.png'
                # Página Navegar
                # BoxLayout:
                #     orientation: 'vertical'
                # # Barra de navegacao superior com botao de voltar
                # MDIconButton:
                #     pos_hint: {'center_x': 0.1,'center_y': 0.93}
                #     icon: 'icones/Expand_left@3x.png'
                #     icon_size: "45sp"
                #     on_release: app.mudar_tela('loginpage')
                MDBackdrop:
                    id: backdrop
                    back_layer_color: "#EDF1FF"
                    # voltando para tela anterior da homepage
                    left_action_items: [['icones/Expand_left@3x.png', lambda x: app.mudar_tela('homepage')]]
                    close_icon: 'icones/Expand_left@3x.png'
                    header: True
                    header_text: "Navegar"
                    # centralizando o header


                    MDBackdropBackLayer:                      
                        orientation: "vertical"
                        # alterando o tamanho do Back layer
                        padding: ('100dp', '20dp', '100dp', '550dp')
                        # Campos de pesquisa de origem e destino
                        MDTextField:
                            hint_text: "Partida"
                            helper_text: "Informe seu local de Partida"
                            helper_text_mode: "on_focus"
                            icon_right: "map-marker"
                            icon_right_color: app.theme_cls.primary_color
                            pos_hint: {'center_x': 0.5,'center_y': 0.5}
                            size_hint_x: None
                            width: 300
                        MDTextField:
                            hint_text: "Destino"
                            helper_text: "Informe seu destino"
                            helper_text_mode: "on_focus"
                            icon_right: "map-marker"
                            icon_right_color: app.theme_cls.primary_color
                            pos_hint: {'center_x': 0.5,'center_y': 0.5}
                            size_hint_x: None
                            width: 300

                    MDBackdropFrontLayer:
                        orientation: 'vertical'
                        MDFloatLayout:
                            md_bg_color: "#EDF1FF"
                            # Visualização do Mapa
                            MapView:
                                pos_hint: {'center_x': 0.5,'center_y': 0.5}
                                # localização do mapa em tempo real
                                lat: -1.474081251977831
                                lon: -48.45160647253775
                                zoom: 1000
                                # Verifica a localização atual quando o mapa é carregado
                                # on_lat:
                                #     print(self.lat)
                                # on_lon:
                                #     print(self.lon)
                                MapMarkerPopup:
                                    source: 'icones/Marker.png'
                                    lat: -1.474081251977831
                                    lon: -48.45160647253775
                                    Button:
                                        on_release: print("Hello World") 
                            # Botão de abrir o menu
                            MDRaisedButton:
                                text: ""
                                pos_hint: {'center_x': 0.5,'center_y': 1.02}
                                # ajustar o tamanho do botao
                                on_release: backdrop.open()
                                radius: [4, 4, 4, 4]
                                size: 36, 10
                                md_bg_color: "#C7D2FB"        

            MDBottomNavigationItem:
                id: perfil
                name: 'screen 3'
                text: 'Perfil'
                icon: 'icones/user_cicrle_light.png'
                # Página Perfil
                PerfilPage:
                    id: perfilpage
                                  

    MDNavigationDrawer:
        id: nav_drawer
        radius: (0, 10, 10, 0)
        # o tamanho da width é 275
        # o tamanho do height é 699
        md_bg_color: "#C7D2FB"

        MDNavigationDrawerMenu:
            MDIconButton:
                icon: 'icones/config/bt-configuraçoes@3x.png'
                icon_size: "40sp"
                on_release: nav_drawer.set_state("close")
            MDNavigationDrawerItem:
                icon: 'icones/bt_pagamento/bt_pagamento@3x.png'
                text: 'Pagamento'
                font_size: 20
            # Item de sobre
            MDNavigationDrawerItem:
                icon: 'icones/sobre.png'
                icon_size: "100sp"
                text: 'Sobre ASK'
                font_size: 20



# HomePage: